<header class="app-header" role="banner">
  <div class="header-container">
    <div class="header-brand">
      <a routerLink="/dashboard" class="brand-link" aria-label="Retour au tableau de bord">
        <h1 class="brand-title">ğŸ“š App Ã‰ducative</h1>
      </a>
    </div>

    <nav class="header-nav" [class.menu-open]="isMenuOpen()" role="navigation" aria-label="Navigation principale">
      <button 
        class="menu-toggle" 
        (click)="toggleMenu()"
        [attr.aria-expanded]="isMenuOpen()"
        aria-label="Ouvrir le menu"
        aria-controls="main-menu">
        <span class="hamburger-icon"></span>
      </button>

      <ul class="nav-list" id="main-menu" [class.menu-open]="isMenuOpen()">
        @if (isAuthenticated()) {
          <li class="nav-item">
            <a 
              routerLink="/dashboard" 
              routerLinkActive="active"
              [routerLinkActiveOptions]="{exact: false}"
              class="nav-link"
              (click)="closeMenu()">
              ğŸ  Tableau de bord
            </a>
          </li>

          @if (activeRole() === 'parent') {
            <li class="nav-item">
              <a 
                routerLink="/parent-profile" 
                routerLinkActive="active"
                class="nav-link"
                (click)="closeMenu()">
                ğŸ‘¤ Mon profil parent
              </a>
            </li>
            <li class="nav-item">
              <a 
                routerLink="/child-profile" 
                routerLinkActive="active"
                class="nav-link"
                (click)="closeMenu()">
                â• Ajouter un enfant
              </a>
            </li>
          }

          @if (activeRole() === 'prof') {
            <li class="nav-item">
              <a 
                routerLink="/teacher-profile" 
                routerLinkActive="active"
                class="nav-link"
                (click)="closeMenu()">
                ğŸ‘¨â€ğŸ« Mon profil professeur
              </a>
            </li>
            <li class="nav-item">
              <a 
                routerLink="/teacher-assignments" 
                [queryParams]="{ tab: 'assignments' }"
                routerLinkActive="active"
                class="nav-link"
                (click)="closeMenu()">
                ğŸ“š Mes affectations
              </a>
            </li>
          }

          @if (hasMultipleRoles()) {
            <li class="nav-item">
              <a 
                routerLink="/select-role" 
                routerLinkActive="active"
                class="nav-link"
                (click)="closeMenu()">
                ğŸ”„ Changer de rÃ´le
              </a>
            </li>
          }
        }
      </ul>
    </nav>

    <div class="header-actions">
      @if (isAuthenticated()) {
        <div class="user-info">
          <span class="user-name" aria-label="Utilisateur connectÃ©">{{ displayName() }}</span>
          @if (activeRole()) {
            <span class="user-role active-role" [attr.aria-label]="'RÃ´le actif: ' + activeRoleLabel()">
              RÃ´le actif: {{ activeRoleLabel() }}
            </span>
          }
        </div>
        <button 
          class="btn-logout" 
          (click)="logout()"
          aria-label="Se dÃ©connecter">
          DÃ©connexion
        </button>
      } @else {
        <a routerLink="/login" class="btn-login">Connexion</a>
      }
    </div>
  </div>
</header>
