<div class="chronologie-game">
  @if (instructions) {
    <div class="game-instructions">
      <p>{{ instructions }}</p>
    </div>
  }
  @if (question) {
    <div class="game-question">
      <h2>{{ question }}</h2>
    </div>
  }
  <app-aide-section
    [aides]="aides"
    [aideImageUrl]="aideImageUrl"
    [aideVideoUrl]="aideVideoUrl">
  </app-aide-section>
  <div 
    class="words-list"
    cdkDropList
    (cdkDropListDropped)="drop($event)"
    [cdkDropListDisabled]="disabled || isSubmitted()">
    
    @for (mot of currentOrder(); track mot; let i = $index) {
      <div 
        class="word-item"
        cdkDrag
        [class.correct]="isWordCorrect(i) && showResult && isCorrect()"
        [class.incorrect]="!isWordCorrect(i) && isSubmitted() && showResult && isCorrect()"
        [class.disabled]="disabled || isSubmitted()">
        
        <div class="drag-handle" cdkDragHandle>
          <svg width="12" height="20" viewBox="0 0 12 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="3" cy="4" r="1.5" fill="currentColor"/>
            <circle cx="3" cy="10" r="1.5" fill="currentColor"/>
            <circle cx="3" cy="16" r="1.5" fill="currentColor"/>
            <circle cx="9" cy="4" r="1.5" fill="currentColor"/>
            <circle cx="9" cy="10" r="1.5" fill="currentColor"/>
            <circle cx="9" cy="16" r="1.5" fill="currentColor"/>
          </svg>
        </div>
        
        <span class="word-text">{{ mot }}</span>
        
        @if (isSubmitted() && showResult && isWordCorrect(i) && isCorrect()) {
          <span class="correct-indicator">✓</span>
        }
      </div>
    }
  </div>

  @if (!isSubmitted()) {
    <div class="actions">
      <button 
        class="btn btn-primary" 
        (click)="validate()" 
        [disabled]="disabled">
        Valider
      </button>
    </div>
  }

  @if (isSubmitted() && showResult && isCorrect()) {
    <div class="result-message correct">
      ✅ Ordre correct !
    </div>
  }

  <app-game-error-actions
    [isSubmitted]="isSubmitted()"
    [isCorrect]="isCorrect()"
    (resetRequested)="reset()"
    (nextRequested)="nextRequested.emit()">
  </app-game-error-actions>

</div>

