<div class="vrai-faux-game">
  @if (instructions) {
    <div class="game-instructions">
      <p>{{ instructions }}</p>
    </div>
  }
  @if (question) {
    <div class="game-question">
      <h2>{{ question }}</h2>
    </div>
  }
  @if (aides && aides.length > 0) {
    <div class="aides-toggle-container">
      <button 
        type="button"
        class="aides-toggle-btn"
        (click)="toggleAides()"
        [attr.aria-expanded]="showAides()"
        [attr.aria-label]="showAides() ? 'Masquer aide' : 'Afficher aide'">
        <span class="toggle-icon">{{ showAides() ? '−' : '+' }}</span>
        <span class="toggle-text">{{ showAides() ? 'Masquer aide' : 'Afficher aide' }}</span>
      </button>
      @if (showAides()) {
        <div class="aides-container">
          <strong>Aide :</strong>
          <ul>
            @for (aide of aides; track $index) {
              <li>{{ aide }}</li>
            }
          </ul>
        </div>
      }
    </div>
  }
  @if ((showResult || isSubmitted()) && isCorrect() !== null) {
    <div class="result-message" [class.correct]="isCorrect()" [class.incorrect]="!isCorrect()">
      @if (isCorrect()) {
        ✅ Toutes les réponses sont correctes !
      } @else {
        ❌ Certaines réponses sont incorrectes.
      }
    </div>
  }

  <div class="vrai-faux-grid">
    <div class="vrai-faux-header">
      <div class="header-column vrai-column">Vrai</div>
      <div class="header-column enonce-column"></div>
      <div class="header-column faux-column">Faux</div>
    </div>
    @for (enonce of getVraiFauxEnonces(); track $index) {
      <div class="vrai-faux-row">
        <button
          type="button"
          class="vrai-button"
          [class.selected]="isAnswerSelected($index, true)"
          [class.correct]="isSubmitted() && isCorrectAnswer($index) === true && isAnswerSelected($index, true)"
          [class.incorrect]="isSubmitted() && isCorrectAnswer($index) === false && isAnswerSelected($index, true)"
          (click)="selectAnswer($index, true)"
          [disabled]="disabled || isSubmitted()">
          <span class="circle"></span>
        </button>
        <div class="enonce-text">{{ enonce.texte }}</div>
        <button
          type="button"
          class="faux-button"
          [class.selected]="isAnswerSelected($index, false)"
          [class.correct]="isSubmitted() && isCorrectAnswer($index) === true && isAnswerSelected($index, false)"
          [class.incorrect]="isSubmitted() && isCorrectAnswer($index) === false && isAnswerSelected($index, false)"
          (click)="selectAnswer($index, false)"
          [disabled]="disabled || isSubmitted()">
          <span class="circle"></span>
        </button>
      </div>
    }
  </div>
</div>

