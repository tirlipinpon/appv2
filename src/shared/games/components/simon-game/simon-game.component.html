<div class="simon-game">
  @if (instructions) {
    <div class="game-instructions">
      <p>{{ instructions }}</p>
    </div>
  }
  @if (question) {
    <div class="game-question">
      <h2>{{ question }}</h2>
    </div>
  }
  @if (aides && aides.length > 0) {
    <div class="aides-toggle-container">
      <button 
        type="button"
        class="aides-toggle-btn"
        (click)="toggleAides()"
        [attr.aria-expanded]="showAides()"
        [attr.aria-label]="showAides() ? 'Masquer aide' : 'Afficher aide'">
        <span class="toggle-icon">{{ showAides() ? '‚àí' : '+' }}</span>
        <span class="toggle-text">{{ showAides() ? 'Masquer aide' : 'Afficher aide' }}</span>
      </button>
      @if (showAides()) {
        <div class="aides-container">
          <strong>Aide :</strong>
          <ul>
            @for (aide of aides; track $index) {
              <li>{{ aide }}</li>
            }
          </ul>
        </div>
      }
    </div>
  }
  <!-- Message de r√©sultat -->
  @if (isGameOver()) {
    <div class="result-message" [class.correct]="isCorrect()" [class.incorrect]="!isCorrect()">
      @if (isCorrect()) {
        ‚úÖ Bravo ! Vous avez r√©ussi le niveau {{ currentLevel() }} !
      } @else {
        ‚ùå Erreur ! Vous avez atteint le niveau {{ currentLevel() }}.
      }
    </div>
  }

  <!-- Informations du jeu -->
  <div class="game-info">
    <div class="level-info">
      <strong>Niveau :</strong> {{ currentLevel() }}
    </div>
    @if (isAnimating()) {
      <div class="status-message">
        üëÄ Regardez la s√©quence...
      </div>
    } @else if (isPlaying() && !isGameOver()) {
      <div class="status-message">
        üëÜ Reproduisez la s√©quence
      </div>
    }
  </div>

  <!-- Grille des √©l√©ments -->
  <div class="simon-grid" [class.animating]="isAnimating()" [class.disabled]="isAnimating() || isGameOver()">
    @for (element of availableElements(); track element.id) {
      <button
        type="button"
        [class]="getElementClass(element.id)"
        [style]="getElementStyle(element)"
        (click)="onElementClick(element.id)"
        [disabled]="isAnimating() || isGameOver() || !isPlaying()"
        [attr.aria-label]="'√âl√©ment ' + element.displayValue">
        @if (!isColorMode()) {
          <span class="element-content">{{ element.displayValue }}</span>
        }
      </button>
    }
  </div>

  <!-- Progression -->
  @if (isPlaying() && !isAnimating() && !isGameOver()) {
    <div class="progress-info">
      S√©quence : {{ userSequence().length }} / {{ sequence().length }}
    </div>
  }

  <!-- Bouton de r√©initialisation -->
  @if (isGameOver()) {
    <button class="btn btn-secondary" (click)="reset()">üîÑ Recommencer</button>
  }
</div>

