@if (shouldShow()) {
  <div class="aides-toggle-container">
    <div class="aides-controls">
      @if (hasAideText()) {
        <button 
          type="button"
          class="aide-media-btn"
          (click)="toggleAides()"
          [attr.aria-expanded]="showAides()"
          [attr.aria-label]="showAides() ? 'Masquer aide' : 'Afficher aide'"
          [matTooltip]="showAides() ? 'Masquer l\'aide texte' : 'Afficher l\'aide texte'">
          {{ showAides() ? 'ğŸ“' : 'ğŸ’¡' }}
        </button>
      }
      @if (hasImage()) {
        <button
          type="button"
          class="aide-media-btn"
          (click)="openImageModal()"
          aria-label="Voir l'image d'aide"
          matTooltip="Voir l'image d'aide">
          ğŸ–¼ï¸
        </button>
      }
      @if (hasVideo()) {
        <button
          type="button"
          class="aide-media-btn"
          (click)="openVideoModal()"
          aria-label="Voir la vidÃ©o d'aide"
          matTooltip="Voir la vidÃ©o d'aide">
          â–¶ï¸
        </button>
      }
    </div>
    @if (showAides() && hasAideText()) {
      <div class="aides-container">
        <strong>Aide</strong>
        <ul>
          @for (aide of aides; track $index) {
            <li>{{ aide }}</li>
          }
        </ul>
      </div>
    }
  </div>
}

@if (showMediaModal()) {
  <app-aide-media-modal
    [aideImageUrl]="mediaTypeToShow() === 'image' ? aideImageUrl : null"
    [aideVideoUrl]="mediaTypeToShow() === 'video' ? aideVideoUrl : null"
    [isOpen]="showMediaModal"
    (close)="closeMediaModal()">
  </app-aide-media-modal>
}
