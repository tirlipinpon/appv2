<div class="teacher-container">
  <div class="header-actions">
    <a routerLink="/dashboard" class="btn-back">
      ‚Üê Retour au dashboard
    </a>
    <h1>Profil Professeur</h1>
  </div>

  <main class="teacher-content">
    <div *ngIf="showSuccess()" class="success-message">
      <p>‚úÖ {{ isCreating() ? 'Profil cr√©√© avec succ√®s !' : 'Profil mis √† jour avec succ√®s !' }}</p>
    </div>

    <form [formGroup]="teacherForm" (ngSubmit)="onSubmit()" *ngIf="showForm()">
      <div class="form-group">
        <label for="fullname">Nom complet *</label>
        <input 
          id="fullname" 
          type="text" 
          formControlName="fullname"
          [class.error]="teacherForm.get('fullname')?.invalid && teacherForm.get('fullname')?.touched">
        <span *ngIf="teacherForm.get('fullname')?.invalid && teacherForm.get('fullname')?.touched" class="error-message">
          Le nom complet est requis
        </span>
      </div>

      <div class="form-group">
        <label for="bio">Biographie</label>
        <textarea 
          id="bio" 
          formControlName="bio" 
          rows="4"
          placeholder="Pr√©sentez-vous bri√®vement..."></textarea>
      </div>

      <div class="form-group">
        <label for="phone">T√©l√©phone</label>
        <input 
          id="phone" 
          type="tel" 
          formControlName="phone">
      </div>

      <div class="form-group">
        <label for="avatar_url">URL de l'avatar</label>
        <input 
          id="avatar_url" 
          type="url" 
          formControlName="avatar_url"
          placeholder="https://example.com/avatar.jpg">
        <div *ngIf="teacherForm.get('avatar_url')?.value" class="avatar-preview">
          <img [src]="teacherForm.get('avatar_url')?.value" [alt]="'Avatar preview'" class="avatar-preview-image" 
               onerror="this.style.display='none'">
        </div>
      </div>

      <div *ngIf="teacherEmail()" class="form-group info-group">
        <label>üìß Email de contact</label>
        <p class="info-value">
          <a [href]="'mailto:' + teacherEmail()" class="email-link">{{ teacherEmail() }}</a>
        </p>
        <small class="info-hint">Cet email est associ√© √† votre compte et ne peut pas √™tre modifi√© ici.</small>
      </div>

      <div class="form-group sharing-preferences">
        <label class="sharing-preferences-title">üîí Pr√©f√©rences de partage</label>
        <p class="sharing-preferences-description">Choisissez quelles informations vous souhaitez partager avec les parents dans votre profil public.</p>
        
        <div class="checkbox-group">
          <label class="checkbox-label">
            <input 
              type="checkbox" 
              formControlName="share_email"
              id="share_email">
            <span class="checkbox-text">
              <strong>Partager mon email</strong>
              <small>Les parents pourront voir et vous contacter par email</small>
            </span>
          </label>
        </div>

        <div class="checkbox-group">
          <label class="checkbox-label">
            <input 
              type="checkbox" 
              formControlName="share_phone"
              id="share_phone">
            <span class="checkbox-text">
              <strong>Partager mon t√©l√©phone</strong>
              <small>Les parents pourront voir votre num√©ro de t√©l√©phone</small>
            </span>
          </label>
        </div>
      </div>

      <div class="form-actions">
        <button 
          type="submit" 
          [disabled]="teacherForm.invalid || isLoading()"
          class="btn btn-primary">
          {{ buttonText() }}
        </button>
        <button 
          type="button" 
          (click)="onCancel()" 
          *ngIf="!isCreating()"
          class="btn btn-secondary">
          Annuler
        </button>
      </div>
    </form>

    <div *ngIf="isLoading()" class="loading">
      <p>Chargement...</p>
    </div>
  </main>
</div>

